<div class="student-profile-page">

  <!-- Header -->
  <mat-card class="profile-header-card">
    <div class="profile-header-content">
      <div class="avatar"></div>
      <div class="profile-info">
        <h2>{{ student.firstName }} {{ student.lastName }}</h2>
        <div class="class-info">
          <div class="info-item">
            <strong>Class:</strong> {{ student.studentGrade.grade }}
          </div>
          <div class="info-item">
            <strong>Section:</strong> {{ student.studentGrade.section }}
          </div>
          <div class="info-item">
            <strong>Roll Number:</strong> {{ student.studentGrade.rollNumber }}
          </div>
        </div>
      </div>
      <button mat-raised-button color="primary" (click)="viewAndUpdateStudent(student.studentId)">Edit</button>
    </div>
  </mat-card>

  <!-- Personal Info & Grade Info side-by-side -->
  <div class="card-row">
    <mat-card class="profile-section">
      <mat-card-title>Personal Information</mat-card-title>
      <mat-card-content class="grid-2col">
        <div><label>First Name</label><p>{{ student.firstName }}</p></div>
        <div><label>Last Name</label><p>{{ student.lastName }}</p></div>
        <div><label>Gender</label><p>{{ student.gender }}</p></div>
        <div><label>Date of Birth</label><p>{{ student.dateOfBirth | date }}</p></div>
        <div><label>Email</label><p>{{ student.emailId }}</p></div>
        <div><label>Phone</label><p>{{ student.phoneNumber }}</p></div>
      </mat-card-content>
    </mat-card>

    <mat-card class="profile-section">
      <mat-card-title>Grade Details</mat-card-title>
      <mat-card-content class="grid-2col">
        <div><label>Academic Year</label><p>{{ studentGrade.academicYear }}</p></div>
        <div><label>Class</label><p>{{ studentGrade.grade }}</p></div>
        <div><label>Section</label><p>{{ studentGrade.section }}</p></div>
        <div><label>Roll Number</label><p>{{ studentGrade.rollNumber }}</p></div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Attendance, Fee Info -->
  <div class="card-row">
    <mat-card class="profile-section">
      <mat-card-title>Attendance</mat-card-title>
      <mat-card-content class="grid-2col">
        <div><label>Total Days</label><p>{{ studentAttendance.totalWorkingDays }}</p></div>
        <div><label>Days Present</label><p>{{ studentAttendance.daysPresent }}</p></div>
      </mat-card-content>
    </mat-card>

    <mat-card class="profile-section">
      <mat-card-title>Fee Details</mat-card-title>
      <mat-card-content class="grid-2col">
        <div><label>Fee Paid</label><p>{{ studentFeeDetails.feePaid }}</p></div>
        <div><label>Balance</label><p>{{ studentFeeDetails.balance }}</p></div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Previous Academic Info -->
  <mat-card class="profile-section full-width-card">
    <mat-card-title>Previous Academic Records</mat-card-title>
    <mat-card-content>
      <table mat-table [dataSource]="studentPreviousAcademicDetails" class="mat-elevation-z1" style="width: 100%">
        <ng-container matColumnDef="schoolName">
          <th mat-header-cell *matHeaderCellDef>School</th>
          <td mat-cell *matCellDef="let edu">{{ edu.schoolName }}</td>
        </ng-container>
        <ng-container matColumnDef="grade">
          <th mat-header-cell *matHeaderCellDef>Grade</th>
          <td mat-cell *matCellDef="let edu">{{ edu.grade }}</td>
        </ng-container>
        <ng-container matColumnDef="academicYear">
          <th mat-header-cell *matHeaderCellDef>Year</th>
          <td mat-cell *matCellDef="let edu">{{ edu.academicYear }}</td>
        </ng-container>
        <ng-container matColumnDef="percentage">
          <th mat-header-cell *matHeaderCellDef>Percentage</th>
          <td mat-cell *matCellDef="let edu">{{ edu.percentage }}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="eduColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: eduColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- Parent Info as Previous Education Style Table -->
  <mat-card class="profile-section full-width-card">
    <mat-card-title>Parent / Guardian Details</mat-card-title>
    <mat-card-content>
      <table mat-table [dataSource]="studentParentGuardians" class="mat-elevation-z1" style="width: 100%">
        <ng-container matColumnDef="name">
          <th mat-header-cell *matHeaderCellDef>Name</th>
          <td mat-cell *matCellDef="let parent">{{ parent.name }}</td>
        </ng-container>
        <ng-container matColumnDef="mobileNumber">
          <th mat-header-cell *matHeaderCellDef>Mobile</th>
          <td mat-cell *matCellDef="let parent">{{ parent.phoneNumber }}</td>
        </ng-container>
        <ng-container matColumnDef="occupation">
          <th mat-header-cell *matHeaderCellDef>Occupation</th>
          <td mat-cell *matCellDef="let parent">{{ parent.occupation }}</td>
        </ng-container>
        <ng-container matColumnDef="age">
          <th mat-header-cell *matHeaderCellDef>Age</th>
          <td mat-cell *matCellDef="let parent">{{ parent.age }}</td>
        </ng-container>
        <ng-container matColumnDef="email">
          <th mat-header-cell *matHeaderCellDef>Email</th>
          <td mat-cell *matCellDef="let parent">{{ parent.emailId }}</td>
        </ng-container>
        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
      </table>
    </mat-card-content>
  </mat-card>

  <!-- Documents & Transport Info side-by-side -->
  <div class="card-row">
    <mat-card class="profile-section">
      <mat-card-title>Documents</mat-card-title>
      <mat-card-content class="grid-2col">
        <!-- <div><label>Birth Certificate</label><p>{{ studentDocuments[0]?.documentType }}</p></div>
        <div><label>Aadhaar</label><p>{{ studentDocuments[0]?.documentNumber }}</p></div> -->
      </mat-card-content>
    </mat-card>

    <mat-card class="profile-section">
      <mat-card-title>Transport</mat-card-title>
      <mat-card-content class="grid-2col">
        <div><label>Route No</label><p>{{ studentTransport.busRouteNumber }}</p></div>
        <div><label>Pickup Point</label><p>{{ studentTransport.pickupPoint }}</p></div>
      </mat-card-content>
    </mat-card>
  </div>

</div>